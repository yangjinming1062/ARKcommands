var MediaPlayer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([function(e,t,n){"use strict";function r(e,t){for(var n=e.buffered,r=e.currentTime,i=0;i<n.length;i++){var o=n.start(i),s=n.end(i);if(!(s<=r)){if(o-t>r)break;for(var a=i+1;a<n.length&&!(n.start(a)-s>t);a++)s=n.end(a);for(var u=i-1;u>=0&&!(o-n.end(u)>t);u--)o=n.start(u);return{start:Math.min(o,r),end:s}}}return{start:r,end:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.UNKNOWN=-1,t.MIN_PLAYABLE_BUFFER=.1,t.decodedFrames=function(e){return"number"==typeof e.webkitDecodedFrameCount?e.webkitDecodedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().totalVideoFrames:"number"==typeof e.mozDecodedFrames?e.mozDecodedFrames:t.UNKNOWN},t.droppedFrames=function(e){return"number"==typeof e.webkitDroppedFrameCount?e.webkitDroppedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().droppedVideoFrames:t.UNKNOWN},t.bufferedRange=r,t.willBuffer=function(e,t){var n=r(e,t).end,i=e.currentTime,o=n-i;return!(e.ended||e.duration-i<t)&&o<t},t.getNextPlayablePosition=function(e,n){void 0===n&&(n=t.MIN_PLAYABLE_BUFFER);var i=r(e,n).end-e.currentTime>n,o=e.buffered;if(o.length>1||!i)for(var s=e.currentTime,a=0;a<o.length;a++){var u=o.start(a),c=o.end(a);if(s<u&&c-u>n)return u+n}return i?e.currentTime+n:e.currentTime},t.subscribe=function(e,t,n){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(27));t.default=self.Promise||i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={keySystem:"org.w3.clearkey",uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"},i={keySystem:"com.apple.fps.2_0",certUrl:"https://fp-keyos-twitch.licensekeyserver.com/cert/a17fd33d3843df9b17679ccf50a419b2.der",licenseUrl:"https://fp-keyos-twitch.licensekeyserver.com/getkey",uuid:"94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"},o={keySystem:"com.microsoft.playready",licenseUrl:"https://pr-keyos-twitch.licensekeyserver.com/core/rightsmanager.asmx",uuid:"9a04f079-9840-4286-ab92-e65be0885f95"},s={keySystem:"com.widevine.alpha",licenseUrl:"https://wv-keyos-twitch.licensekeyserver.com",uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};t.KEY_SYSTEMS={CLEARKEY:r,FAIRPLAY:i,PLAYREADY:o,WIDEVINE:s},t.KEY_SYSTEMS_BY_STRING={"com.widevine.alpha":s,"com.microsoft.playready":o,"com.apple.fps.2_0":i,"org.w3.clearkey":r},t.AUTH_XML_URL="https://vizima.twitch.tv/api/authxml/";var a={value:4,message:"Your browser does not support any DRM Content Decryption Modules"},u={value:4,message:"There was an issue while updating DRM License"},c={value:2,message:"Error while requesting DRM license"},d={value:4,message:"Error creating key session"},p={value:4,message:"Encryption key not usable because of internal error in CDM"},l={value:4,message:"Unable to find valid CDM support on media"},f={value:2,message:"Request for AuthXML failed"},h={value:2,message:"Request for DRM certificate failed"};t.ERRORS={NO_CDM_SUPPORT:a,SESSION_UPDATE:u,LICENSE_REQUEST:c,KEY_SESSION_CREATION:d,KEY_SESSION_INTERNAL:p,NO_PSSH_FOUND:l,AUTH_XML_REQUEST:f,CERT_REQUEST:h}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,function(e){console&&console.warn&&console.warn(e)}(a)}return e}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i,i}function l(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,d=h(u,c);for(n=0;n<c;++n)o(d[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return l(this,e,!0)},a.prototype.rawListeners=function(e){return l(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.buffer=[],this.head=0,this.tail=0}return e.prototype.push=function(e){this.tail===this.buffer.length?this.buffer.push(e):this.buffer[this.tail]=e,this.tail++},e.prototype.pop=function(){var e=this.buffer[this.head];return this.buffer[this.head]=null,this.head++,this.empty()&&(this.head=0,this.tail=0),e},e.prototype.size=function(){return this.tail-this.head},e.prototype.empty=function(){return this.head>=this.tail},e}();t.Queue=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.IDLE="Idle",e.READY="Ready",e.BUFFERING="Buffering",e.PLAYING="Playing",e.ENDED="Ended"}(t.PlayerState||(t.PlayerState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AVAILABLE="RemotePlayerAvailable",e.UNAVAILABLE="RemotePlayerUnavailable",e.SESSION_STARTED="RemotePlayerSessionStarted",e.SESSION_ENDED="RemotePlayerSessionEnded"}(t.RemotePlayerEvent||(t.RemotePlayerEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PLAYER_LOADED_IN_WORKER="player_loaded_in_worker",e.HLS_MASTER_PLAYLIST_REQUEST="master_manifest_request",e.HLS_MASTER_PLAYLIST_READY="master_manifest_ready",e.HLS_MEDIA_PLAYLIST_REQUEST="variant_request",e.HLS_MEDIA_PLAYLIST_READY="variant_ready",e.MIN_BUFFER_READY="min_buffer_ready",e.VIDEO_ELEMENT_PLAY="video_element_play"}(t.ProfileEvent||(t.ProfileEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.AUTO_SWITCH_QUALITY_CHANGED="PlayerAutoSwitchQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.TRACKING="PlayerTracking",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.PROFILE="PlayerProfile",e.SESSION_DATA="PlayerSessionData",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.METADATA_CUE_ENTER="PlayerMetadataCueEnter",e.METADATA_CUE_EXIT="PlayerMetadataCueExit"}(t.PlayerEvent||(t.PlayerEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ID3="MetaID3",e.CAPTION="MetaCaption"}(t.MetadataEvent||(t.MetadataEvent={}))},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=/^(\d+)\.(\d+)\.(\d+)[+|-]?(.*)?$/,o=/^(\d+)\.(\d+)[+|-]?(.*)?$/,s=/^(\d+)$/,a=r(n(37))._detect(navigator.userAgent),u=function(e){var t=i.exec(e)||o.exec(e)||s.exec(e)||[];return{major:parseInt(t[1],10)||0,minor:parseInt(t[2],10)||0,patch:parseInt(t[3],10)||0}}(String(a.version));t.browser={chrome:a.chrome,chromecast:navigator.userAgent.toLowerCase().indexOf("crkey")>-1,domain:window.location.host.split(".").slice(-2).join("."),family:a.name.toLowerCase(),firefox:a.firefox,host:window.location.host,major:u.major,minor:u.minor,msedge:a.msedge,msie:a.msie,name:navigator.appVersion,opera:a.opera,osName:a.osname,osVersion:String(a.osversion),patch:u.patch,safari:a.safari,url:window.location.href,userAgent:navigator.userAgent}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(2),o=n(9),s=n(8),a=n(7),u=n(6),c=n(5),d=n(35),p=n(23),l=n(22);function f(e,t){var n;return(n=r.browser.msie?new l.WorkerShim(e,window):new Worker(URL.createObjectURL(new Blob(["importScripts('"+e+"')"])))).postMessage({wasmBinaryUrl:t}),n}t.isWasmSupported="object"==typeof window.WebAssembly&&"function"==typeof window.WebAssembly.instantiate,t.canPlay="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported("video/mp4; codecs='avc1.42E01E,mp4a.40.2'"),t.createWorker=f;var h=r.browser.chrome&&63===r.browser.major||r.browser.opera,m="time_to_player_core_init",y=function(){function e(t,o){var a=this;this.ttvProperties={},this.worker=o,this.id=e.instanceId++,this.emitter=new p.TypedEventEmitter,this.seekTime=null,this.paused=!0,this.isLoaded=!1,this.autoplay=!1,this.isQualitySupported=t.isQualitySupported||g,this.onvisibilitychange=function(){return a.onVisibilityChange()},this.onmessage=function(e){return a.onWorkerMessage(e)},this.mediaSinkManager=new d.MediaSinkManager(this),this.ttvProperties[m]=performance.now(),this.state={looping:!1,autoSwitchQuality:!0},this.stats={},this.resetState(),this.attachHandlers(),this.postMessage("create",[{settings:function(e){try{return n(21)("./"+e+".json")}catch(e){return{}}}(t.settings),logLevel:String(t.logLevel),mseSupported:E(),keySystem:void 0!==t.keySystem?t.keySystem:function(e){if("function"==typeof navigator.requestMediaKeySystemAccess)return e.msie||e.msedge?i.KEY_SYSTEMS.PLAYREADY.uuid:i.KEY_SYSTEMS.WIDEVINE.uuid;return""}(r.browser),browserContext:r.browser,codecs:e.isVP9Supported()?["vp09"]:[]}]),self.setTimeout(function(){this.emitter&&this.emitter.emit(s.PlayerEvent.INITIALIZED)}.bind(this),0)}return e.isVP9Supported=function(){return E()&&MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')},e.prototype.delete=function(){var e=S(document).visibilityChange;this.postMessage("delete"),this.worker.removeEventListener("message",this.onmessage),document.removeEventListener(e,this.onvisibilitychange),this.mediaSinkManager.getCurrentSink().delete(),this.emitter=null},e.prototype.attachHTMLVideoElement=function(e){this.mediaSinkManager=new d.MediaSinkManager(this,e)},e.prototype.getHTMLVideoElement=function(){return this.mediaSinkManager.videoElement()},e.prototype.load=function(e,t){void 0===t&&(t=""),this.ttvProperties.time_to_load_start=performance.now(),this.postMessage("load",[e,t]),this.resetState()},e.prototype.play=function(){this.mediaSinkManager.captureGesture(),this.paused=!1,this.attemptPlay()},e.prototype.setAutoplay=function(e){this.autoplay=e},e.prototype.pause=function(){this.paused=!0,this.postMessage("pause")},e.prototype.isPaused=function(){return this.paused},e.prototype.seekTo=function(e){this.getDuration()>.5&&(e=Math.min(e,this.getDuration()-.5)),e=Math.max(0,e),this.seekTime=e,this.postMessage("seekTo",[e])},e.prototype.isSeeking=function(){return null!==this.seekTime},e.prototype.getDuration=function(){return this.state.duration},e.prototype.getStartOffset=function(){return this.state.startOffset||0},e.prototype.getPosition=function(){return null===this.seekTime?this.mediaSinkManager.getCurrentSink().getCurrentTime():this.seekTime},e.prototype.getBuffered=function(){return this.mediaSinkManager.getCurrentSink().buffered()},e.prototype.getBufferDuration=function(){return this.mediaSinkManager.getCurrentSink().bufferDuration()},e.prototype.getPlayerState=function(){return this.state.playerState},e.prototype.getVideoWidth=function(){return this.mediaSinkManager.videoElement().videoWidth},e.prototype.getVideoHeight=function(){return this.mediaSinkManager.videoElement().videoHeight},e.prototype.getVideoFrameRate=function(){return this.mediaSinkManager.getCurrentSink().framerate()},e.prototype.getVideoBitRate=function(){return this.stats.videoBitRate},e.prototype.getAverageBitrate=function(){return this.stats.averageBitrate},e.prototype.getBandwidthEstimate=function(){return this.stats.bandwidthEstimate},e.prototype.getVersion=function(){return"2.17.2-639fc256"},e.prototype.isLiveLowLatency=function(){return Boolean(this.state.sessionData.FUTURE)},e.prototype.isLooping=function(){return this.state.looping},e.prototype.setLooping=function(e){this.postMessage("setLooping",[e]),this.state.looping=e},e.prototype.isMuted=function(){return this.mediaSinkManager.getCurrentSink().isMuted()},e.prototype.setMuted=function(e){this.mediaSinkManager.getCurrentSink().setMuted(e),this.postMessage("setMuted",[e]),this.emitter.emit(s.PlayerEvent.MUTED_CHANGED)},e.prototype.setVolume=function(e){this.mediaSinkManager.getCurrentSink().setVolume(e),this.postMessage("setVolume",[e]),this.emitter.emit(s.PlayerEvent.VOLUME_CHANGED)},e.prototype.getVolume=function(){return this.mediaSinkManager.getCurrentSink().getVolume()},e.prototype.getQuality=function(){return this.state.quality},e.prototype.setQuality=function(e,t){void 0===t&&(t=!1),this.postMessage("setQuality",[e,t]),this.state.autoSwitchQuality=!1},e.prototype.getQualities=function(){return this.state.qualities},e.prototype.setAuthToken=function(e){this.postMessage("setAuthToken",[e])},e.prototype.getAutoSwitchQuality=function(){return this.state.autoSwitchQuality},e.prototype.setAutoSwitchQuality=function(e){this.state.autoSwitchQuality=e,this.postMessage("setAutoSwitchQuality",[e])},e.prototype.setAutoInitialBitrate=function(e){this.postMessage("setAutoInitialBitrate",[e])},e.prototype.setAutoMaxBitrate=function(e){this.postMessage("setAutoMaxBitrate",[e])},e.prototype.setAutoMaxVideoSize=function(e,t){this.postMessage("setAutoMaxVideoSize",[e,t])},e.prototype.setAutoViewportSize=function(e,t){this.postMessage("setAutoViewportSize",[e,t])},e.prototype.setAutoViewportScale=function(e){this.postMessage("setAutoViewportScale",[e])},e.prototype.setAutoViewportSizeEnabled=function(e){},e.prototype.getPlaybackRate=function(){return this.mediaSinkManager.getCurrentSink().getPlaybackRate()},e.prototype.setPlaybackRate=function(e){this.postMessage("setPlaybackRate",[e])},e.prototype.setClientId=function(e){this.postMessage("setClientId",[e])},e.prototype.setDeviceId=function(e){this.postMessage("setDeviceId",[e])},e.prototype.setLiveSpeedUpRate=function(e){this.postMessage("setLiveSpeedUpRate",[e])},e.prototype.setPlayerType=function(e){this.postMessage("setPlayerType",[e])},e.prototype.setLiveMaxLatency=function(e){this.postMessage("setLiveMaxLatency",[e])},e.prototype.setLiveLowLatencyEnabled=function(e){this.postMessage("setLiveLowLatencyEnabled",[e])},e.prototype.setMinBuffer=function(e){this.postMessage("setMinBuffer",[e])},e.prototype.setMaxBuffer=function(e){this.postMessage("setMaxBuffer",[e])},e.prototype.setVisible=function(e){},e.prototype.setAnalyticsEndpoint=function(e){this.postMessage("setAnalyticsEndpoint",[e])},e.prototype.setAnalyticsSendEvents=function(e){this.postMessage("setAnalyticsSendEvents",[e])},e.prototype.setBufferReplaceEnabled=function(e){},e.prototype.addEventListener=function(e,t){this.emitter.on(e,t)},e.prototype.removeEventListener=function(e,t){this.emitter.removeListener(e,t)},e.prototype.getDroppedFrames=function(){return this.mediaSinkManager.getCurrentSink().droppedFrames()},e.prototype.getDecodedFrames=function(){return this.mediaSinkManager.getCurrentSink().decodedFrames()},e.prototype.getDecodingInfo=function(e){var t=this;navigator.mediaCapabilities.decodingInfo(e).then(function(e){t.postMessage("onMediaDecodingInfoResult",[e])})},e.prototype.getDisplayWidth=function(){return this.mediaSinkManager.getCurrentSink().getDisplayWidth()},e.prototype.getDisplayHeight=function(){return this.mediaSinkManager.getCurrentSink().getDisplayHeight()},e.prototype.getManifestInfo=function(){return this.getSessionData()},e.prototype.getSessionData=function(){return this.state.sessionData},e.prototype.getLiveLatency=function(){return this.stats.broadcasterLatency},e.prototype.getBroadcasterLatency=function(){return 1e3*this.stats.broadcasterLatency},e.prototype.getTranscoderLatency=function(){return 1e3*this.stats.transcoderLatency},e.prototype.getNetworkProfile=function(){return this.stats.networkProfile},e.prototype.isProtected=function(){return this.mediaSinkManager.isProtected()},e.prototype.startRemotePlayback=function(){this.postMessage("startRemotePlayback")},e.prototype.endRemotePlayback=function(){this.postMessage("endRemotePlayback")},e.prototype.onSinkTimeUpdate=function(){var e=this.mediaSinkManager.getCurrentSink();null===this.seekTime&&(this.postMessage("onClientSinkUpdate",[{currentTime:e.getCurrentTime(),decodedFrames:e.decodedFrames(),droppedFrames:e.droppedFrames(),framerate:e.framerate()}]),this.emitter.emit(s.PlayerEvent.TIME_UPDATE))},e.prototype.onSinkBufferUpdate=function(){this.emitter.emit(s.PlayerEvent.BUFFER_UPDATE)},e.prototype.onSinkDurationChanged=function(e){this.postMessage("onClientSinkDurationChanged",[e])},e.prototype.onSinkEnded=function(){this.postMessage("onClientSinkEnded")},e.prototype.onSinkIdle=function(){this.postMessage("onClientSinkIdle")},e.prototype.onSinkPlaying=function(e){this.postMessage("onClientSinkPlaying"),e&&this.play()},e.prototype.onSinkStop=function(e){var t=S(document).hidden;document[t]?this.postMessage("pause"):e?this.isMuted()?(this.pause(),this.emitter.emit(s.PlayerEvent.PLAYBACK_BLOCKED)):(this.setMuted(!0),this.mediaSinkManager.getCurrentSink().play(),this.emitter.emit(s.PlayerEvent.AUDIO_BLOCKED)):this.pause()},e.prototype.onSinkError=function(e){var t=e.value,n=e.code,r=e.message;this.postMessage("onClientSinkError",[t,n,r])},e.prototype.onSinkPlay=function(){this.emitter.emit(s.PlayerEvent.PROFILE,a.ProfileEvent.VIDEO_ELEMENT_PLAY)},e.prototype.onSinkVideoDisplaySizeChanged=function(e,t){this.setAutoViewportSize(e,t)},e.prototype.onRemoteDevice=function(e){this.emitter.emit(e?u.RemotePlayerEvent.AVAILABLE:u.RemotePlayerEvent.UNAVAILABLE)},e.prototype.onSessionError=function(){this.postMessage("onClientSinkError",[1,0,"Chromecast session error"])},e.prototype.onLoadMediaError=function(){this.postMessage("onClientSinkError",[1,0,"Chromecast load media failed"])},e.prototype.onUserCancel=function(){this.endRemotePlayback(),this.emitter.emit(u.RemotePlayerEvent.SESSION_ENDED)},e.prototype.onSessionStop=function(){this.endRemotePlayback(),this.emitter.emit(u.RemotePlayerEvent.SESSION_ENDED)},e.prototype.onSessionStarted=function(e){this.emitter.emit(u.RemotePlayerEvent.SESSION_STARTED,e)},e.prototype.attemptPlay=function(){var e=S(document).hidden;!document[e]&&this.isLoaded&&this.postMessage("play"),this.ttvProperties.time_to_play_attempt=performance.now()},e.prototype.postMessage=function(e,t){this.worker.postMessage({id:this.id,funcName:e,args:t})},e.prototype.resetState=function(){v(this.state,{playerState:c.PlayerState.IDLE,quality:{name:"",group:"",codecs:"",bitrate:0,width:0,height:0,framerate:0},qualities:[],duration:0,startOffset:0,sessionData:{}}),v(this.stats,{averageBitrate:0,videoBitRate:0,bandwidthEstimate:0,broadcasterLatency:0,transcoderLatency:0,networkProfile:[]}),this.emitter.emit(s.PlayerEvent.DURATION_CHANGED,{duration:0}),this.seekTime=null,this.isLoaded=!1},e.prototype.attachHandlers=function(){var e=this;this.worker.addEventListener("message",this.onmessage),document.addEventListener("visibilitychange",this.onvisibilitychange);var t=this.emitter,n=function(t){return v(e.state,t)};t.on(s.PlayerEvent.QUALITY_CHANGED,n),t.on(s.PlayerEvent.AUTO_SWITCH_QUALITY_CHANGED,n),t.on(s.PlayerEvent.DURATION_CHANGED,n),t.on(s.PlayerEvent.VOLUME_CHANGED,function(){return e.onVolumeChanged()}),t.on(s.PlayerEvent.MUTED_CHANGED,function(){return e.onMutedChanged()}),t.on(s.PlayerEvent.SEEK_COMPLETED,function(){return e.onSeekCompleted()}),t.on(s.PlayerEvent.ERROR,function(){return e.onError()}),t.on(s.PlayerEvent.SESSION_DATA,function(t){return e.onSessionData(t)}),t.on(s.PlayerEvent.TRACKING,this.onTrackingEvent.bind(this)),t.on(s.PlayerEvent.PROFILE,this.onProfileEvent.bind(this)),t.on(1,function(t){return v(e.stats,t)}),t.on(0,function(t){return e.onStateChanged(t)}),t.on(6,function(t){return e.mediaSinkManager.applyRPC(t)}),t.on(2,function(t){return e.mediaSinkManager.configure(t)}),t.on(3,function(){return e.mediaSinkManager.reset()}),t.on(4,function(t){return e.addCue(t)}),t.on(5,function(t){return e.getDecodingInfo(t)}),t.on(o.MetadataEvent.ID3,function(t){return e.onID3(t)})},e.prototype.onProfileEvent=function(e){switch(e){case a.ProfileEvent.HLS_MASTER_PLAYLIST_REQUEST:return this.ttvProperties.time_to_master_playlist_request=performance.now();case a.ProfileEvent.HLS_MASTER_PLAYLIST_READY:return this.ttvProperties.time_to_master_playlist_ready=performance.now();case a.ProfileEvent.HLS_MEDIA_PLAYLIST_REQUEST:return this.ttvProperties.time_to_variant_request=performance.now();case a.ProfileEvent.HLS_MEDIA_PLAYLIST_READY:return this.ttvProperties.time_to_variant_ready=performance.now();default:return null}},e.prototype.onTrackingEvent=function(e){"video-play"===e.name&&this.onVideoPlay(e)},e.prototype.onVideoPlay=function(e){var t=["time_to_load_start","time_to_master_playlist_ready","time_to_master_playlist_request","time_to_min_buffer_ready","time_to_play_attempt","time_to_playback_start",m,"time_to_variant_ready","time_to_variant_request"];for(var n in Object.assign(e.properties,this.ttvProperties),e.properties)if(t.includes(n)){var r=e.properties[n];e.properties[n]=parseInt((r-e.properties[m]).toString(),10)}},e.prototype.onVolumeChanged=function(){var e=S(document).hidden;h&&document[e]&&0===this.getVolume()&&this.postMessage("pause")},e.prototype.onMutedChanged=function(){var e=S(document).hidden;h&&document[e]&&this.isMuted()&&this.postMessage("pause")},e.prototype.onSeekCompleted=function(){this.seekTime=null},e.prototype.onError=function(){this.paused=!0},e.prototype.onStateChanged=function(e){var t=this;switch(e.playerState){case c.PlayerState.READY:var n=function(e,t){var n=[],r=[];return e.forEach(function(e){t(e)?n.push(e):r.push(e)}),{supported:n,unsupported:r}}(e.qualities,this.isQualitySupported);e.qualities=n.supported,n.unsupported.forEach(function(e){return t.postMessage("removeQuality",[e])}),this.isLoaded=!0,this.autoplay&&this.play(),this.paused||this.attemptPlay();break;case c.PlayerState.ENDED:this.paused=!0}v(this.state,e),this.emitter.emit(e.playerState)},e.prototype.addCue=function(e){var t=this,n=e.id,r=e.start,i=e.end;this.mediaSinkManager.getCurrentSink().addCue(r,i,function(e){t.postMessage("onClientSinkCue",[n,e])})},e.prototype.onID3=function(e){var t=this;e.forEach(function(e){if("TXXX"===e.id&&"segmentmetadata"===e.desc&&e.info.length){var n=function(e){try{return JSON.parse(e)}catch(t){return console.error("Failed JSON parse:",e),{}}}(e.info[0]);if(n.hasOwnProperty("stream_offset")){var r=Number(n.stream_offset);isNaN(r)||(t.state.startOffset=r-t.getPosition())}}})},e.prototype.onVisibilityChange=function(){var e=S(document).hidden;this.paused||document[e]||this.attemptPlay(),h&&!this.paused&&document[e]&&(this.isMuted()||0===this.getVolume())&&this.postMessage("pause"),this.postMessage("setVisible",[!document[e]])},e.prototype.onSessionData=function(e){v(this.state,e)},e.prototype.onWorkerMessage=function(e){var t=e.data;t.id===this.id&&this.emitter.emit(t.type,t.arg)},e.createWorker=f,e.instanceId=0,e}();function v(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function E(){return"undefined"!=typeof MediaSource}function g(e){return""===e.codecs||"undefined"==typeof MediaSource||MediaSource.isTypeSupported('video/mp4;codecs="'+e.codecs+'"')}function S(e){var t,n;return void 0!==e.hidden?(t="hidden",n="visibilitychange"):void 0!==e.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==e.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),{hidden:t,visibilityChange:n}}t.MediaPlayer=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessToken=function(e){var t=e.streamId,n=e.streamType,r=e.clientId,i=e.oAuthToken,o=["client_id="+r,"player_type="+e.playerType,"player_backend="+e.playerBackend,"platform="+e.platform];i&&o.push("oauth_token="+i);var s="https://api.twitch.tv/api/"+n+"s/"+t+"/access_token?"+o.join("&");return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",s),n.onerror=t,n.onload=function(){if(n.status>=200&&n.status<300)try{e(JSON.parse(n.responseText))}catch(e){t(e)}else t(new Error(n.responseText))},n.send()})},t.createMasterPlaylistUrl=function(e,t){var n,r=e.streamId,i=e.streamType,o=e.playerType,s=e.playerBackend,a=t.token,u=t.sig,c=["playlist_include_framerate=true","allow_source=true","player_type="+o,"player_backend="+s];return"vod"===i?(n="vod",c.push("nauth="+encodeURIComponent(a),"nauthsig="+u)):(n="api/channel/hls",c.push("token="+encodeURIComponent(a),"sig="+u)),"https://usher.ttvnw.net/"+n+"/"+r+".m3u8?"+c.join("&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GENERIC="Error",e.NOT_SUPPORTED="ErrorNotSupported",e.NO_SOURCE="ErrorNoSource",e.INVALID_DATA="ErrorInvalidData",e.INVALID_STATE="ErrorInvalidState",e.INVALID_PARAMETER="ErrorInvalidParameter",e.TIMEOUT="ErrorTimeout",e.INVALID_OUTPUT="ErrorInvalidOutput",e.INTERNAL="ErrorInternal",e.NETWORK="ErrorNetwork",e.NETWORK_IO="ErrorNetworkIO",e.AUTHORIZATION="ErrorAuthorization",e.NOT_AVAILABLE="ErrorNotAvailable"}(t.ErrorType||(t.ErrorType={})),function(e){e[e.GEOBLOCKED=1]="GEOBLOCKED",e[e.UNSUPPORTED_DEVICE=2]="UNSUPPORTED_DEVICE",e[e.ANONYMIZER_BLOCKED=3]="ANONYMIZER_BLOCKED",e[e.CELLULAR_NETWORK_PROHIBITED=4]="CELLULAR_NETWORK_PROHIBITED",e[e.UNAUTHORIZATION_ENTITLEMENTS=5]="UNAUTHORIZATION_ENTITLEMENTS",e[e.VOD_RESTRICTED=6]="VOD_RESTRICTED"}(t.AuthorizationError||(t.AuthorizationError={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UNKNOWN="Unspecified",e.FILE="File",e.PLAYLIST="Playlist",e.SEGMENT="Segment",e.SOURCE="Source",e.DECODER="Decode",e.RENDERER="Render"}(t.ErrorSource||(t.ErrorSource={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(11)),r(n(14)),r(n(13)),r(n(9)),r(n(8)),r(n(7)),r(n(6)),r(n(5)),r(n(12))},function(e){e.exports={lowlatency:{liveSpeedUpRate:1.05},buffercontrol:{liveSpeedUpRate:1.05}}},function(e){e.exports={lowlatency:{liveSpeedUpRate:1.05},buffercontrol:{liveSpeedUpRate:1}}},function(e){e.exports={buffercontrol:{liveSpeedUpRate:1}}},function(e){e.exports={abr:{estimator:"fastslow"}}},function(e){e.exports={abr:{enableLowLatency:!0}}},function(e,t,n){var r={"./abrall.json":20,"./abrfs.json":19,"./nospd.json":18,"./nospd5.json":17,"./speed5.json":16};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=21},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(4),o=function(){function e(e,t){var n=this;this.workerPort={postMessage:this.postMessageFromWorker.bind(this),onmessage:function(){}},this.emitter=new r.EventEmitter,this.messageQueue=new i.Queue,this.terminated=!1,this.loadScript(e,function(e){return n.applyWorkerEnv(e,t)})}return e.prototype.postMessage=function(e){this.messageQueue?this.messageQueue.push(e):this.postMessageToWorker(e)},e.prototype.terminate=function(){this.terminated=!1},e.prototype.addEventListener=function(e,t){this.emitter.on(e,t)},e.prototype.removeEventListener=function(e,t){this.emitter.off(e,t)},e.prototype.loadScript=function(e,t){var n=this,r=new XMLHttpRequest;r.open("GET",e),r.addEventListener("load",function(){r.status>=200&&r.status<400?t(r.response):n.emitter.emit("error",new Error(r.statusText))}),r.addEventListener("error",function(e){n.emitter.emit("error",e)}),r.send()},e.prototype.applyWorkerEnv=function(e,t){try{Function("self","messageHandler",e)(window,this.workerPort)}catch(e){return void this.emitter.emit("error",e)}for(;!this.messageQueue.empty();)this.postMessageToWorker(this.messageQueue.pop());this.messageQueue=null},e.prototype.postMessageFromWorker=function(e){var t=this;setTimeout(function(){t.emitter.emit("message",{data:e})},0)},e.prototype.postMessageToWorker=function(e){var t=this;setTimeout(function(){t.workerPort.onmessage({data:e})},0)},e}();t.WorkerShim=o},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(){function e(){this.emitter=new i.EventEmitter}return e.prototype.on=function(e,t){this.emitter.on(String(e),t)},e.prototype.removeListener=function(e,t){this.emitter.removeListener(String(e),t)},e.prototype.emit=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(t=this.emitter).emit.apply(t,r([String(e)],n))},e}();t.TypedEventEmitter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.video=e,this.tracks=[e.addTextTrack("metadata")]}return e.prototype.addCue=function(e){for(var t,n=0,r=this.tracks;n<r.length;n++){var i=r[n],o=i.cues;if(!o.length||o[o.length-1].startTime<e.startTime&&o[o.length-1].endTime!==e.endTime){t=i;break}}t||(t=this.video.addTextTrack("metadata"),this.tracks.push(t));try{t.addCue(e)}catch(t){var s=this.video.addTextTrack("metadata");this.tracks.push(s);try{s.addCue(e)}catch(t){console.warn("Player could not add cue at start ",e.startTime,"end ",e.endTime)}}},e.prototype.remove=function(e,t){this.tracks.forEach(function(n){for(var r=n.cues,i=r.length-1;i>=0;i--){var o=r[i];if(o.startTime<e)break;o.endTime<t&&n.removeCue(o)}})},e}();t.SafeTextTrack=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(e,t){var n=this;this.listener=e,this.videoElement=t,this.unsubList=[],this.fps=0,this.intervalId=-1,this.paused=!0,this.attemptingToPlay=!1,this.unsubList.push(r.subscribe(this.videoElement,"waiting",function(){return n.onVideoWaiting()}),r.subscribe(this.videoElement,"timeupdate",function(){return n.onVideoTimeUpdate()}),r.subscribe(this.videoElement,"durationchange",function(){return n.onVideoDurationChange()}),r.subscribe(this.videoElement,"error",function(){return n.onVideoError()}),r.subscribe(this.videoElement,"play",function(){return n.onVideoPlay()}),r.subscribe(this.videoElement,"pause",function(){return n.onVideoPause()}),r.subscribe(this.videoElement,"ended",function(){return n.onVideoEnded()}),r.subscribe(this.videoElement,"playing",function(){return n.onVideoPlaying()}))}return e.prototype.configure=function(e){var t=e.path;this.videoElement.src=t},e.prototype.play=function(){var e=this,t=this.videoElement.buffered;if(t.length>0){var n=t.start(t.length-1),r=t.end(t.length-1);(this.videoElement.duration===1/0&&r<this.videoElement.currentTime||-1===this.videoElement.src.indexOf(".mp4")&&this.videoElement.currentTime<n)&&(console.warn("Moving to buffered region"),this.videoElement.currentTime=n)}this.paused=!1,this.attemptingToPlay=!0,Promise.resolve(this.videoElement.play()).then(function(){e.attemptingToPlay=!1}).catch(function(){e.attemptingToPlay=!1,e.checkStopped(!0)}),this.listener.onSinkPlay()},e.prototype.pause=function(){this.paused=!0,this.videoElement.pause(),clearTimeout(this.intervalId)},e.prototype.reinit=function(){var e=this.videoElement.src;this.videoElement.src="",this.videoElement.load(),this.videoElement.src=e},e.prototype.seekTo=function(e){this.videoElement.currentTime=e},e.prototype.setPlaybackRate=function(e){this.videoElement.playbackRate=e},e.prototype.setVolume=function(e){this.videoElement.volume=e},e.prototype.getVolume=function(){return this.videoElement.volume},e.prototype.buffered=function(){return r.bufferedRange(this.videoElement,r.MIN_PLAYABLE_BUFFER)},e.prototype.decodedFrames=function(){return r.decodedFrames(this.videoElement)},e.prototype.droppedFrames=function(){return r.droppedFrames(this.videoElement)},e.prototype.framerate=function(){return this.fps},e.prototype.delete=function(){this.unsubList.forEach(function(e){return e()}),this.videoElement.src="",this.videoElement.load()},e.prototype.isMuted=function(){return this.videoElement.muted},e.prototype.setMuted=function(e){this.videoElement.muted=e},e.prototype.getDisplayWidth=function(){return this.videoElement.clientWidth},e.prototype.getDisplayHeight=function(){return this.videoElement.clientHeight},e.prototype.getPlaybackRate=function(){return this.videoElement.playbackRate},e.prototype.getCurrentTime=function(){return this.videoElement.currentTime},e.prototype.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.videoElement.currentTime)},e.prototype.enqueue=function(){},e.prototype.endOfStream=function(){},e.prototype.setTimestampOffset=function(){},e.prototype.addCue=function(e,t,n){},e.prototype.remove=function(){},e.prototype.onVideoWaiting=function(){var e=this;if(r.bufferedRange(this.videoElement,r.MIN_PLAYABLE_BUFFER).end-this.videoElement.currentTime<r.MIN_PLAYABLE_BUFFER){this.listener.onSinkIdle();var t=self.setTimeout(function(){e.listener.onSinkError({value:101,code:101,message:"Buffering timeout"})},12e4),n=r.subscribe(this.videoElement,"timeupdate",function(){n(),clearTimeout(t)})}var i=r.subscribe(this.videoElement,"timeupdate",function(){4===e.videoElement.readyState&&(i(),e.onVideoPlaying())})},e.prototype.onVideoTimeUpdate=function(){this.listener.onSinkTimeUpdate(),this.listener.onSinkVideoDisplaySizeChanged(this.videoElement.clientWidth*self.devicePixelRatio,this.videoElement.clientHeight*self.devicePixelRatio)},e.prototype.onVideoDurationChange=function(){this.listener.onSinkDurationChanged(this.videoElement.duration)},e.prototype.onVideoError=function(){var e=this.videoElement.error,t=e.code,n=e.message,r=void 0===n?"":n;this.listener.onSinkError({value:t,code:t,message:r})},e.prototype.onVideoPlay=function(){var e=this,t=this.videoElement.currentTime;clearTimeout(this.intervalId),this.intervalId=self.setTimeout(function(){return e.heartbeat(t)},2e3)},e.prototype.onVideoPause=function(){clearTimeout(this.intervalId),this.attemptingToPlay||this.checkStopped(!1)},e.prototype.onVideoEnded=function(){this.listener.onSinkEnded()},e.prototype.onVideoPlaying=function(){this.listener.onSinkPlaying(this.paused),this.trackFPS(r.decodedFrames(this.videoElement),performance.now()),this.trackBufferUpdate(r.bufferedRange(this.videoElement,r.MIN_PLAYABLE_BUFFER).end)},e.prototype.heartbeat=function(e){var t=this,n=this.videoElement.currentTime;if(n===e){if(r.willBuffer(this.videoElement,r.MIN_PLAYABLE_BUFFER))return void this.listener.onSinkIdle();var i=r.getNextPlayablePosition(this.videoElement,r.MIN_PLAYABLE_BUFFER);i!==n&&(console.warn("jumping "+(i-n)+"s gap"),this.videoElement.currentTime=i,n=this.videoElement.currentTime)}this.intervalId=self.setTimeout(function(){return t.heartbeat(n)},2e3)},e.prototype.checkStopped=function(e){!this.videoElement.paused||this.videoElement.ended||this.videoElement.error||this.paused||this.listener.onSinkStop(e)},e.prototype.trackFPS=function(e,t){var n=this,i=r.decodedFrames(this.videoElement),o=performance.now();this.fps=(i-e)/(o-t)*1e3;var s=r.subscribe(this.videoElement,"timeupdate",function(){s(),n.trackFPS(i,o)})},e.prototype.trackBufferUpdate=function(e){var t=this,n=this.buffered().end;n!==e&&this.listener.onSinkBufferUpdate();var i=r.subscribe(this.videoElement,"timeupdate",function(){i(),t.trackBufferUpdate(n)})},e}();t.PassthroughSink=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e,t){this.video=e,this.srcBuf=t,this.pending=new r.Queue,this.srcBuf.addEventListener("updateend",this.process.bind(this))}return e.prototype.appendBuffer=function(e){this.schedule(function(t){try{t.appendBuffer(e)}catch(e){if("QuotaExceededError"===e.name){var n=t.buffered,r=n.start(0),i=n.end(n.length-1),o=(r+i)/2;t.remove(o,i)}}})},e.prototype.setTimestampOffset=function(e){this.schedule(function(t){t.timestampOffset=e})},e.prototype.remove=function(e,t){this.schedule(function(n){var r=n.buffered;if(r.length){var i=Math.max(e,r.start(0)),o=Math.min(t,r.end(r.length-1));i<o&&n.remove(i,o)}})},e.prototype.schedule=function(e){this.pending.empty()&&!this.updating()?e(this.srcBuf):(this.pending.push(e),this.process())},e.prototype.process=function(){for(;!this.pending.empty()&&!this.updating();)this.pending.pop()(this.srcBuf)},e.prototype.updating=function(){return!this.srcBuf||this.srcBuf.updating||null!==this.video.error},e}();t.SafeSourceBuffer=i},function(e,t){!function(t){var n=setTimeout;function r(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void a(t.promise,e)}s(t.promise,r)}else(1===e._state?s:a)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void c(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){if(0===t.length)return e([]);var r=t.length;function i(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(o,e)},n)}t[o]=s,0==--r&&e(t)}catch(e){n(e)}}for(var o=0;o<t.length;o++)i(o,t[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=i:t.Promise||(t.Promise=i)}(this)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(0);t.MIN_PLAYABLE_BUFFER=.1;var s=function(){function e(e,t){var n=this;this.video=e,this.listener=t,this.onDelete=[],this.intervalId=0,this.idle=!0,this.paused=!0,this.lastPlayhead=0,this.lastBufferEnd=0,this.fps=0,this.lastDecodedFrames=0,this.lastTimeUpdate=performance.now(),this.idleTimeout=-1,this.isPassThrough=!1,this.isWaiting=!1;var r=function(e,t){n.video.addEventListener(e,t),n.onDelete.push(function(){return n.video.removeEventListener(e,t)})};r("play",function(){return n.onVideoPlay()}),r("pause",function(){return n.onVideoPause()}),r("durationchange",function(){return n.onVideoDurationChange()}),r("timeupdate",function(){return n.onVideoTimeUpdate()}),r("ended",function(){return n.onVideoEnded()}),r("error",function(){return n.onVideoError()}),r("waiting",function(){return n.onVideoWaiting()}),r("playing",function(){return n.onVideoPlaying()})}return e.prototype.delete=function(){this.onDelete.forEach(function(e){return e()}),clearInterval(this.intervalId)},e.prototype.play=function(){var e=this;this.paused=!1;var t=this.video.buffered;if(t.length>0){var n=t.start(t.length-1),r=t.end(t.length-1);(this.isPassThrough&&this.video.duration===1/0&&r<this.video.currentTime||this.video.currentTime<n)&&(console.warn("Moving to buffered region"),this.video.currentTime=n)}i.default.resolve(this.video.play()).catch(function(){return e.checkStopped(!0)}),this.listener.onSinkPlay()},e.prototype.pause=function(){this.paused=!0,this.video.pause()},e.prototype.endOfStream=function(){this.idle=!1,clearTimeout(this.idleTimeout),this.idleTimeout=-1},e.prototype.framerate=function(){return this.fps},e.prototype.updatePassThrough=function(e){this.isPassThrough=e,e&&this.video.paused&&!this.paused&&this.play()},e.prototype.onVideoPlay=function(){var e=this;this.lastPlayhead=this.video.currentTime,clearInterval(this.intervalId),this.intervalId=self.setInterval(function(){return e.heartbeat()},2e3)},e.prototype.onVideoPause=function(){clearInterval(this.intervalId),this.checkStopped(!1)},e.prototype.onVideoDurationChange=function(){this.isPassThrough&&this.listener.onSinkDurationChanged(this.video.duration)},e.prototype.onVideoTimeUpdate=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1,this.isPassThrough&&this.isWaiting&&4===this.video.readyState&&(this.isWaiting=!1,this.listener.onSinkPlaying(this.paused));var e=o.decodedFrames(this.video),n=performance.now();this.fps=1e3*Math.max(e-this.lastDecodedFrames,0)/(n-this.lastTimeUpdate),this.lastDecodedFrames=e,this.lastTimeUpdate=n,this.listener.onSinkTimeUpdate();var r=o.bufferedRange(this.video,t.MIN_PLAYABLE_BUFFER);this.checkBufferUpdate(r),this.isPassThrough||this.updateIdle(r)},e.prototype.onVideoEnded=function(){this.listener.onSinkEnded()},e.prototype.onVideoWaiting=function(){this.isWaiting=!0,this.isPassThrough&&!this.video.seeking&&this.listener.onSinkIdle()},e.prototype.onVideoPlaying=function(){this.isWaiting=!1,this.listener.onSinkPlaying(this.paused)},e.prototype.onVideoError=function(){var e=this.video.error,t=e.code,n=e.message,r=void 0===n?"":n;this.listener.onSinkError({value:t,code:t,message:r})},e.prototype.heartbeat=function(){var e=o.bufferedRange(this.video,t.MIN_PLAYABLE_BUFFER);if(this.video.paused)clearInterval(this.intervalId);else if(this.video.currentTime===this.lastPlayhead){var n=o.getNextPlayablePosition(this.video,t.MIN_PLAYABLE_BUFFER);n!==this.video.currentTime&&(console.warn("jumping "+(n-this.video.currentTime)+"s gap"),this.video.currentTime=n),this.updateIdle(e)}else this.checkBufferUpdate(e),this.lastPlayhead=this.video.currentTime;this.videoDisplaySizeUpdate()},e.prototype.videoDisplaySizeUpdate=function(){var e=this.video.clientWidth*window.devicePixelRatio,t=this.video.clientHeight*window.devicePixelRatio;this.listener.onSinkVideoDisplaySizeChanged(e,t)},e.prototype.checkBufferUpdate=function(e){var t=e.end;t!==this.lastBufferEnd&&(this.lastBufferEnd=t,this.listener.onSinkBufferUpdate())},e.prototype.updateIdle=function(e){var n=this,r=(e.start,e.end);if(this.video.paused)this.idle=!0;else{var i=r-this.video.currentTime,o=!(this.video.ended||this.video.duration-this.video.currentTime<t.MIN_PLAYABLE_BUFFER)&&i<t.MIN_PLAYABLE_BUFFER;o&&!this.idle&&(this.idleTimeout=self.setTimeout(function(){return n.onBufferingTimeout()},12e4),this.listener.onSinkIdle()),this.idle=o}},e.prototype.onBufferingTimeout=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1,this.listener.onSinkError({value:101,code:101,message:"Buffering timeout"})},e.prototype.checkStopped=function(e){!this.video.paused||this.video.ended||this.video.error||this.paused||this.listener.onSinkStop(e)},e}();t.PlaybackMonitor=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(28),o=r(n(1)),s=n(26),a=n(0),u=function(){function e(e,t,n){this.video=t,this.metaTrack=n,this.codecs=Object.create(null),this.listener=e,this.playbackMonitor=new i.PlaybackMonitor(t,e),this.mediaSource=null,this.tracks=Object.create(null),this.trackOffsets=Object.create(null)}return e.prototype.configure=function(e){var t=e.trackID,n=e.codec;this.codecs[t]=n,this.mediaSource||(this.mediaSource=d(this.video)),this.tracks[t]||this.addSourceBuffer(t,n,0)},e.prototype.enqueue=function(e){var t=e.trackID,n=e.buffer,r=this.tracks[t];r&&r.then(function(e){return e.appendBuffer(n)},c)},e.prototype.endOfStream=function(){var e=this;this.scheduleUpdate().then(function(){return e.playbackMonitor.endOfStream()})},e.prototype.setTimestampOffset=function(e){var t=e.trackID,n=e.offset,r=this.tracks[t];r&&(this.trackOffsets[t]=n,r.then(function(e){return e.setTimestampOffset(n)},c))},e.prototype.play=function(){var e=this;this.scheduleUpdate().then(function(){return e.playbackMonitor.play()})},e.prototype.pause=function(){var e=this;this.scheduleUpdate().then(function(){return e.playbackMonitor.pause()})},e.prototype.reinit=function(){this.playbackMonitor.pause();var e=this.video.currentTime,t=this.buffered();this.metaTrack.remove(t.start,t.end);var n=this.video.src;for(var r in this.mediaSource=d(this.video),URL.revokeObjectURL(n),this.tracks)this.addSourceBuffer(r,this.codecs[r],this.trackOffsets[r]);this.video.currentTime=e},e.prototype.remove=function(e){var t=e.start,n=e.end,r=function(e){return e.remove(t,n)};for(var i in this.tracks)this.tracks[i].then(r);this.metaTrack.remove(t,n)},e.prototype.seekTo=function(e){var t=this,n=a.bufferedRange(this.video,i.MIN_PLAYABLE_BUFFER),r=n.start,o=n.end;e>=r&&e<o?this.scheduleUpdate().then(function(){return t.video.currentTime=e}):this.video.currentTime=e},e.prototype.setVolume=function(e){this.video.volume=e},e.prototype.getVolume=function(){return this.video.volume},e.prototype.isMuted=function(){return this.video.muted},e.prototype.setMuted=function(e){this.video.muted=e},e.prototype.getDisplayWidth=function(){return this.video.clientWidth},e.prototype.getDisplayHeight=function(){return this.video.clientHeight},e.prototype.setPlaybackRate=function(e){this.video.playbackRate=e},e.prototype.getPlaybackRate=function(){return this.video.playbackRate},e.prototype.getCurrentTime=function(){return this.video.currentTime},e.prototype.addCue=function(e,t,n){t<=e&&(t=e+i.MIN_PLAYABLE_BUFFER);var r=new(window.VTTCue||window.TextTrackCue)(e,t,"");r.onenter=function(){return n(!0)},r.onexit=function(){return n(!1)},this.metaTrack.addCue(r)},e.prototype.buffered=function(){return a.bufferedRange(this.video,i.MIN_PLAYABLE_BUFFER)},e.prototype.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.video.currentTime)},e.prototype.decodedFrames=function(){return a.decodedFrames(this.video)},e.prototype.droppedFrames=function(){return a.droppedFrames(this.video)},e.prototype.framerate=function(){return this.playbackMonitor.framerate()},e.prototype.delete=function(){if(this.playbackMonitor.delete(),this.metaTrack.remove(0,1/0),this.video.src){var e=this.video.src;this.video.removeAttribute("src"),this.video.load(),URL.revokeObjectURL(e)}},e.prototype.addSourceBuffer=function(e,t,n){var r=this,i=this.mediaSource.then(function(e){var i=e.addSourceBuffer("video/mp4;"+t);return i.timestampOffset=n,new s.SafeSourceBuffer(r.video,i)});i.catch(function(e){return r.listener.onSinkError({value:4,code:4,message:e.toString()})}),this.tracks[e]=i},e.prototype.scheduleUpdate=function(){function e(e){return new o.default(function(t){return e.schedule(t)})}var t=[];for(var n in this.tracks)t.push(this.tracks[n].then(e));return o.default.all(t).catch(c)},e}();function c(){}function d(e){return new o.default(function(t,n){var r=new MediaSource,i=function(){r.removeEventListener("sourceopen",i),"open"===r.readyState?(r.duration=1<<30,t(r)):n(new Error("MediaSource not opened"))};r.addEventListener("sourceopen",i);var o=e.playbackRate;e.src=URL.createObjectURL(r),e.playbackRate=o})}t.MSEMediaSink=u,t._testExports={createMediaSource:d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.licenseRequestData=function(e){var t=String.fromCharCode.apply(null,new Uint16Array(e)),n=(new DOMParser).parseFromString(t,"application/xml");return{headers:function(e){for(var t={},n=e.getElementsByTagName("name"),r=e.getElementsByTagName("value"),i=0;i<n.length;i++)t[n[i].childNodes[0].nodeValue]=r[i].childNodes[0].nodeValue;return t}(n),body:function(e){var t=null;if(e.getElementsByTagName("Challenge").length>0&&e.getElementsByTagName("Challenge")[0]){var n=e.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;n&&(t=atob(n))}return t}(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);function i(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e}function o(e,t){for(var n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=s(t),i=0;i<e.byteLength;){var o=n.getUint32(i);if(n.getUint32(i+4)===r)return e.subarray(i+8,i+o);i+=o}return new Uint8Array(e)}function s(e){return(e.charCodeAt(0)<<24)+(e.charCodeAt(1)<<16)+(e.charCodeAt(2)<<8)+e.charCodeAt(3)}function a(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function u(e){for(var t=atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function c(e){return decodeURIComponent(e.replace(/\+/g," "))}t.arrayBuffersEqual=function(e,t){if((e=i(e))===(t=i(t)))return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),o=0;o<n.byteLength;o++)if(n.getUint8(o)!==r.getUint8(o))return!1;return!0},t.parsePSSHSupportFromInitData=function(e){return function(e){var t=[];return e.forEach(function(e){Object.keys(r.KEY_SYSTEMS).forEach(function(n){var i=r.KEY_SYSTEMS[n];i.uuid===e&&t.push(i)})}),t}(function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n=[],r=0;;){var i=void 0,o=void 0,u=void 0,c=void 0;if(r>=t.buffer.byteLength)break;if(i=t.getUint32(r),o=r+i,r+=4,t.getUint32(r)===s("pssh"))if(r+=4,0===(u=t.getUint8(r))||1===u){r++,r+=3,c="";for(var d=0;d<4;d++)c+=a(t.getUint8(r+d));r+=4,c+="-";for(var d=0;d<2;d++)c+=a(t.getUint8(r+d));r+=2,c+="-";for(var d=0;d<2;d++)c+=a(t.getUint8(r+d));r+=2,c+="-";for(var d=0;d<2;d++)c+=a(t.getUint8(r+d));r+=2,c+="-";for(var d=0;d<6;d++)c+=a(t.getUint8(r+d));r+=6,c=c.toLowerCase(),t.getUint32(r),r+=4,n.push(c),r=o}else r=o;else r=o}return n}(e))},t.httpRequest=function(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;for(var o in i.open(t.method,e,!0),t.headers)t.headers.hasOwnProperty(o)&&i.setRequestHeader(o,t.headers[o]);i.responseType=t.responseType,i.onload=function(){200===i.status&&n(i.response)},i.onloadend=function(){r(i.status)},i.send(t.body)})},t.contentIdFromInitData=function(e){return function(e){for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=a(i)}return t}(o(o(u(JSON.parse(String.fromCharCode.apply(null,e)).sinf[0]),"schi"),"tenc").subarray(8,24))},t.decodeBase64=u,t.encodeBase64=function(e){return btoa(String.fromCharCode.apply(null,e))},t.getParamsFromUrl=function(e){var t={};return new URL(e).searchParams.forEach(function(e,n){t[c(n)]=e?c(e):""}),t}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=n(31),a=n(30),u=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],c=function(){function e(e){var t=this;this.video=e.video,this.listener=e.listener,this.cdmSupport=null,this.selectedCDM=null,this.mediaKeys=void 0,this.pendingSessions=[],this.reset(),this.video.addEventListener("encrypted",function(e){return t.handleEncrypted(e)}),this.video.addEventListener("webkitneedkey",function(e){return t.handleSafariEncrypted(e)})}return e.prototype.configure=function(e){var t=this;if(!this.authXml){var n=new URL(e).pathname.split("/"),r=n[n.length-1].split(".")[0],i=s.getParamsFromUrl(e),a=i.token,u=i.sig,c=""+o.AUTH_XML_URL+r+"?token="+encodeURIComponent(a)+"&sig="+u;this.authXml=s.httpRequest(c,{method:"GET",responseType:"text"}).catch(function(e){t.handleError(Object.assign({code:e},o.ERRORS.AUTH_XML_REQUEST))})}},e.prototype.reset=function(){this.authXml=null,this.sessions=[]},e.prototype.isProtected=function(){return null!==this.authXml},e.prototype.handleError=function(e){this.listener.onSinkError({value:e.value||4,code:e.code||0,message:e.message||""})},e.prototype.hasSession=function(e){for(var t=0,n=this.sessions;t<n.length;t++){var r=n[t];if(r.initData&&s.arrayBuffersEqual(r.initData,e))return!0}return!1},e.prototype.createKeySystemSupportChain=function(){if(null===this.cdmSupport||0===this.cdmSupport.length)return Promise.reject(o.ERRORS.NO_PSSH_FOUND);var e=Promise.reject();return this.cdmSupport.forEach(function(t){e=e.catch(function(){return navigator.requestMediaKeySystemAccess(t.keySystem,u)})}),e=e.catch(function(){return Promise.reject(o.ERRORS.NO_CDM_SUPPORT)})},e.prototype.handleEncrypted=function(e){return r(this,void 0,void 0,function(){var t,n,r;return i(this,function(i){switch(i.label){case 0:if(this.hasSession(e.initData))return[2];if(this.sessions.push(e),null===this.cdmSupport&&(this.cdmSupport=s.parsePSSHSupportFromInitData(e.initData)),void 0!==this.mediaKeys)return[3,6];this.mediaKeys=null,i.label=1;case 1:return i.trys.push([1,5,,6]),[4,this.createKeySystemSupportChain()];case 2:return t=i.sent(),this.selectedCDM=o.KEY_SYSTEMS_BY_STRING[t.keySystem],[4,t.createMediaKeys()];case 3:return n=i.sent(),[4,this.setMediaKeys(n)];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),this.handleError(r),[3,6];case 6:return this.addSession(e),[2]}})})},e.prototype.setMediaKeys=function(e){var t=this;return this.mediaKeys=e,this.pendingSessions.forEach(function(e){return t.createSessionRequest(e)}),this.pendingSessions=[],this.video.setMediaKeys(this.mediaKeys)},e.prototype.addSession=function(e){var t=this;this.mediaKeys?this.createSessionRequest(e).catch(function(){t.handleError(o.ERRORS.KEY_SESSION_CREATION)}):this.pendingSessions.push(e)},e.prototype.createSessionRequest=function(e){var t=this,n=e.initDataType,r=e.initData,i=this.mediaKeys.createSession();return i.addEventListener("message",function(e){return t.handleMessage(e)}),i.addEventListener("keystatuseschange",function(e){return t.handleKeyStatusesChange(e,r)}),i.generateRequest(n,r)},e.prototype.handleKeyStatusesChange=function(e,t){var n=this,r=e.target,i=!1;r.keyStatuses.forEach(function(e){switch(e){case"expired":i=!0;break;case"internal-error":n.handleError(o.ERRORS.KEY_SESSION_INTERNAL)}}),i&&r.close().then(function(){return n.removeSession(t)})},e.prototype.removeSession=function(e){for(var t=0;t<this.sessions.length;t++){if(this.sessions[t].initData===e)return void this.sessions.splice(t,1)}},e.prototype.handleMessage=function(e){return r(this,void 0,void 0,function(){var t,n,r=this;return i(this,function(i){switch(i.label){case 0:return t=e.target,[4,this.generateLicense(e.message)];case 1:return n=i.sent(),t.update(n).catch(function(){r.handleError(o.ERRORS.SESSION_UPDATE)}),[2]}})})},e.prototype.generateLicense=function(e){return r(this,void 0,void 0,function(){var t,n,r,s;return i(this,function(i){switch(i.label){case 0:return this.selectedCDM!==o.KEY_SYSTEMS.CLEARKEY?[3,1]:(t=JSON.parse((new TextDecoder).decode(e)),n=t.kids.map(function(e){return{kty:"oct",alg:"A128KW",kid:e,k:e}}),r=(new TextEncoder).encode(JSON.stringify({keys:n})),[2,Promise.resolve(r)]);case 1:return this.authXml?[4,this.authXml]:[3,3];case 2:return s=i.sent(),[2,this.requestLicense(e,s)];case 3:this.handleError(o.ERRORS.AUTH_XML_REQUEST),i.label=4;case 4:return[2]}})})},e.prototype.requestLicense=function(e,t){return r(this,void 0,void 0,function(){var n,r,u=this;return i(this,function(i){return n={method:"POST",responseType:"arraybuffer",body:e,headers:{customdata:t,"Content-Type":"application/octet-stream"}},this.selectedCDM===o.KEY_SYSTEMS.PLAYREADY&&(r=a.licenseRequestData(e),n.body=r.body,n.headers=Object.assign(n.headers,r.headers)),[2,s.httpRequest(this.selectedCDM.licenseUrl,n).catch(function(){u.handleError(Object.assign({code:status},o.ERRORS.LICENSE_REQUEST))})]})})},e.prototype.handleSafariEncrypted=function(e){return r(this,void 0,void 0,function(){var t,n,r=this;return i(this,function(i){switch(i.label){case 0:this.selectedCDM=o.KEY_SYSTEMS.FAIRPLAY,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s.httpRequest(o.KEY_SYSTEMS.FAIRPLAY.certUrl,{method:"GET",responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}})];case 2:return t=i.sent(),this.setupSafariMediaKeys(e,t).catch(function(e){return r.handleError(e)}),[3,4];case 3:return n=i.sent(),this.handleError(Object.assign({code:n},o.ERRORS.CERT_REQUEST)),[3,4];case 4:return[2]}})})},e.prototype.setupSafariMediaKeys=function(e,t){var n=this;return new Promise(function(r,i){n.video.webkitKeys||n.video.webkitSetMediaKeys(new window.WebKitMediaKeys(o.KEY_SYSTEMS.FAIRPLAY.keySystem)),n.video.webkitKeys||i("Issue setting fairplay media keys");var a=s.contentIdFromInitData(e.initData),u=n.video.webkitKeys.createSession("video/mp4",e.initData);if(!u)return i("Could not create key session");u.contentId=a,u.addEventListener("webkitkeymessage",function(e){var r=e.target,o=e.message;"certificate"===String.fromCharCode.apply(null,e.message)?r.update(new Uint8Array(t)):n.getWebkitLicense(o,a).then(function(e){var t=e.trim();"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),r.update(s.decodeBase64(t))}).catch(i)}),u.addEventListener("webkitkeyadded",r),u.addEventListener("webkitkeyerror",i)})},e.prototype.getWebkitLicense=function(e,t){return this.authXml?this.authXml.then(function(n){var r=o.KEY_SYSTEMS.FAIRPLAY.licenseUrl,i={method:"POST",body:"spc="+s.encodeBase64(e)+"&assetId="+t,responseType:"text",headers:{"Content-Type":"application/x-www-form-urlencoded",customdata:n}};return s.httpRequest(r,i).catch(function(e){return Promise.reject(Object.assign({code:e},o.ERRORS.LICENSE_REQUEST))})}):Promise.reject(o.ERRORS.AUTH_XML_REQUEST)},e}();t.DRMManager=c},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,a)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),s=function(){function t(e){var n=this;this.listener=e,t.prepareCastContext().then(function(){n.remotePlayer=new cast.framework.RemotePlayer,n.remotePlayerController=new cast.framework.RemotePlayerController(n.remotePlayer)}).catch(function(){n.listener.onSessionError()})}return t.canCast=function(){return o.browser.chrome},t.lookForRemotePlaybackDevices=function(e){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.prepareCastContext()];case 1:return(n=r.sent()).addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,function(t){switch(t.castState){case cast.framework.CastState.NO_DEVICES_AVAILABLE:e.onRemoteDevice(!1);break;case cast.framework.CastState.NOT_CONNECTED:e.onRemoteDevice(!0)}}),n.setOptions({receiverApplicationId:"F993ACB3",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),[3,3];case 2:return r.sent(),e.onRemoteDevice(!1),[3,3];case 3:return[2]}})})},t.prepareCastContext=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return window.cast&&window.cast.framework?[2,Promise.resolve(cast.framework.CastContext.getInstance())]:[2,new Promise(function(t,n){if(e.__onGCastApiAvailable=function(e,r){e?t(cast.framework.CastContext.getInstance()):n()},!document.getElementById("pc-chromecast-sender")){var r=document.createElement("script");r.id="pc-chromecast-sender",r.onerror=function(){document.body.removeChild(r),e.__onGCastApiAvailable=function(){},n()},r.async=!0,r.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(r)}})]})})},t.prototype.configure=function(e){var n=e.path;return r(this,void 0,void 0,function(){var e,r,o,s,a,u;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,t.prepareCastContext()];case 1:return e=i.sent(),(r=e.getCurrentSession())?[3,3]:[4,e.requestSession()];case 2:return i.sent(),r=e.getCurrentSession(),this.setupRemotePlayerListeners(r,this.remotePlayerController),[3,4];case 3:r.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&this.setupRemotePlayerListeners(r,this.remotePlayerController),i.label=4;case 4:return(o=new chrome.cast.media.MediaInfo(n,"")).streamType=chrome.cast.media.StreamType.BUFFERED,s=new chrome.cast.media.GenericMediaMetadata,o.metadata=s,o.customData={analytics:{chromecast_sender:"player-core",platform:"web"}},a=new chrome.cast.media.LoadRequest(o),[4,r.loadMedia(a)];case 5:return i.sent(),[3,7];case 6:return u=i.sent(),[2,this.handleError(u)];case 7:return[2]}})})},t.prototype.stopMedia=function(e){return void 0===e&&(e=!0),r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return[4,t.prepareCastContext()];case 1:return n=i.sent(),(r=n.getCurrentSession())&&r.getSessionState()!==cast.framework.SessionState.SESSION_RESUMED&&r.endSession(e),[2]}})})},t.prototype.enqueue=function(){},t.prototype.endOfStream=function(){},t.prototype.setTimestampOffset=function(){},t.prototype.play=function(){this.remotePlayer&&this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},t.prototype.pause=function(){this.remotePlayer&&!this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},t.prototype.reinit=function(){},t.prototype.remove=function(){},t.prototype.seekTo=function(e){this.remotePlayer&&(this.remotePlayer.playerState!==chrome.cast.media.PlayerState.IDLE?(this.remotePlayer.currentTime=e,this.remotePlayerController.seek()):this.seekTime=e)},t.prototype.setPlaybackRate=function(e){},t.prototype.addCue=function(){},t.prototype.bufferDuration=function(){return 0},t.prototype.buffered=function(){return{start:0,end:0}},t.prototype.decodedFrames=function(){return 0},t.prototype.droppedFrames=function(){return 0},t.prototype.framerate=function(){return 0},t.prototype.getDisplayWidth=function(){return 0},t.prototype.getDisplayHeight=function(){return 0},t.prototype.getPlaybackRate=function(){return 0},t.prototype.getCurrentTime=function(){return this.remotePlayer?this.remotePlayer.currentTime:0},t.prototype.delete=function(){this.remotePlayer&&this.stopMedia()},t.prototype.setMuted=function(e){this.remotePlayer&&e!==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()},t.prototype.isMuted=function(){return!!this.remotePlayer&&this.remotePlayer.isMuted},t.prototype.setVolume=function(e){this.remotePlayer&&(this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel())},t.prototype.getVolume=function(){return this.remotePlayer?this.remotePlayer.volumeLevel:0},t.prototype.getDevice=function(){return r(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return[4,t.prepareCastContext()];case 1:return e=r.sent(),(n=e.getCurrentSession())?[2,n.getCastDevice().friendlyName]:[2]}})})},t.prototype.setupRemotePlayerListeners=function(e,t){var n=this,o=function(){return r(n,void 0,void 0,function(){return i(this,function(t){return e.getMediaSession()&&this.listener.onSinkTimeUpdate(),[2]})})},s=function(){switch(n.remotePlayer.playerState){case chrome.cast.media.PlayerState.BUFFERING:n.listener.onSinkIdle();break;case chrome.cast.media.PlayerState.PLAYING:n.listener.onSinkPlaying(!1);break;case chrome.cast.media.PlayerState.IDLE:var t=e.getMediaSession();t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED||n.listener.onSinkEnded()}},a=function(){n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,o),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,s),n.seekTime=0,n.listener.onSessionStop()};e.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,function(){t.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,o),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,s),n.seekTime>0&&(n.remotePlayer.currentTime=n.seekTime,n.remotePlayerController.seek()),n.listener.onSessionStarted(e.getCastDevice().friendlyName)});var u=e.getSessionObj();u.addUpdateListener(function(){u.status===chrome.cast.SessionStatus.STOPPED&&a()}),u.addMediaListener(a)},t.prototype.handleError=function(e){if(chrome.cast)switch(e){case chrome.cast.ErrorCode.SESSION_ERROR:this.listener.onSessionError();break;case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:this.listener.onRemoteDevice(!1);break;case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:this.listener.onLoadMediaError();break;case chrome.cast.ErrorCode.CANCEL:this.listener.onUserCancel();break;default:this.listener.onSinkError({value:1,code:0,message:"Error requesting chromecast session"})}else this.listener.onSinkError({value:1,code:0,message:"Error loading chromecast SDK"})},t}();t.ChromecastMediaSink=s}).call(this,n(33))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(34),o=n(32),s=n(29),a=n(25),u=r(n(1)),c=n(24),d=function(){function e(e,t){this.video=t||document.createElement("video"),this.metaTrack=new c.SafeTextTrack(this.video),this.listener=e,this.drmManager=new o.DRMManager({video:this.video,listener:e}),this.codecs=Object.create(null),this.sink=new p(this.video),i.ChromecastMediaSink.lookForRemotePlaybackDevices(this.listener)}return e.prototype.delete=function(){this.sink.delete(),this.drmManager.reset()},e.prototype.configure=function(e){var t=e.mode,n=e.codec,r=e.trackID;this.sink instanceof p&&(this.sink="chromecast"===t?new i.ChromecastMediaSink(this.listener):"passthrough"===t?new a.PassthroughSink(this.listener,this.video):new s.MSEMediaSink(this.listener,this.video,this.metaTrack)),n?this.codecs[r]=n:e.codec=this.codecs[r],this.sink.configure(e);var o=e.path,u=e.isProtected;o&&u&&this.drmManager.configure(o)},e.prototype.applyRPC=function(e){var t=e.name,n=e.arg;this.sink[t].call(this.sink,n)},e.prototype.getCurrentSink=function(){return this.sink},e.prototype.reset=function(){this.delete(),this.sink=new p(this.video),this.listener.onSinkTimeUpdate(),this.listener.onSinkBufferUpdate()},e.prototype.videoElement=function(){return this.video},e.prototype.isProtected=function(){return this.drmManager.isProtected()},e.prototype.captureGesture=function(){0===this.video.played.length&&(u.default.resolve(this.video.play()).catch(l),this.video.pause())},e}();t.MediaSinkManager=d;var p=function(){function e(e){this.video=e}return e.prototype.configure=function(e){},e.prototype.enqueue=function(e){},e.prototype.endOfStream=function(){},e.prototype.setTimestampOffset=function(e){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.reinit=function(){},e.prototype.remove=function(e){},e.prototype.seekTo=function(e){},e.prototype.setPlaybackRate=function(e){this.video.playbackRate=e},e.prototype.setVolume=function(e){this.video.volume=e},e.prototype.addCue=function(e,t,n){},e.prototype.buffered=function(){return{start:0,end:0}},e.prototype.decodedFrames=function(){return 0},e.prototype.droppedFrames=function(){return 0},e.prototype.framerate=function(){return 0},e.prototype.delete=function(){},e.prototype.getVolume=function(){return this.video.volume},e.prototype.isMuted=function(){return this.video.muted},e.prototype.setMuted=function(e){this.video.muted=e},e.prototype.getDisplayWidth=function(){return 0},e.prototype.getDisplayHeight=function(){return 0},e.prototype.getPlaybackRate=function(){return this.video.playbackRate},e.prototype.getCurrentTime=function(){return 0},e.prototype.bufferDuration=function(){return 0},e}();function l(){}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
!function(t,r,i){void 0!==e&&e.exports?e.exports=i():n(36)("bowser",i)}(0,0,function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,s=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),d=/CrOS/.test(t),p=/silk/i.test(t),l=/sailfish/i.test(t),f=/tizen/i.test(t),h=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),y=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),v=!s&&!p&&/macintosh/i.test(t),E=!a&&!l&&!f&&!h&&/linux/i.test(t),g=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),S=n(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t)&&!/tablet pc/i.test(t),_=!b&&/[^-]mobi/i.test(t),k=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:S||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||S}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:S||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:S||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:S||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},g?(i.msedge=e,i.version=g):(i.msie=e,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:g}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||S}:l?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):p?i={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:S||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",osname:"WebOS",webos:e,version:S||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:f?i={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||S}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||S}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||S}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:S}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},S&&(i.version=S)):s?(i={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},S&&(i.version=S)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||S}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&S&&(i.version=S)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!a&&!i.silk?!i.windowsphone&&s?(i[s]=e,i.ios=e,i.osname="iOS"):v?(i.mac=e,i.osname="macOS"):k?(i.xbox=e,i.osname="Xbox"):y?(i.windows=e,i.osname="Windows"):E&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var P="";i.windows?P=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?P=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?P=(P=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?P=(P=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?P=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?P=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?P=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?P=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(P=n(/tizen[\/\s](\d+(\.\d+)*)/i)),P&&(i.osversion=P);var T=!i.windows&&P.split(".")[0];return b||c||"ipad"==s||a&&(3==T||T>=4&&!_)||i.silk?i.tablet=e:(_||"iphone"==s||"ipod"==s||a||u||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function r(e){return e.split(".").length}function i(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function o(e){for(var t=Math.max(r(e[0]),r(e[1])),n=i(e,function(e){var n=t-r(e);return i((e+=new Array(n+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function s(e,r,i){var s=n;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(s=t(i));var a=""+s.version;for(var u in e)if(e.hasOwnProperty(u)&&s[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return o([a,e[u]])<0}return r}return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=s,n.compareVersions=o,n.check=function(e,t,n){return!s(e,t,n)},n._detect=t,n.detect=t,n})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(11),s=document.currentScript||function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];if(r.src.indexOf("mediaplayer.min.js")>-1)return r}}(document.scripts);s&&(r=s.src.replace(/[\w-\.]+\.js$/g,o.isWasmSupported?"wasmworker.min.js":"worker.min.js"),i=s.src.replace(/[\w-\.]+\.js$/g,"wasmworker.min.wasm")),t.create=function(e){if(r&&i)return new o.MediaPlayer(e,o.createWorker(r,i));console.error("No mediaplayer library found")},function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(15))}]);